<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">Resumo Financeiro</ui:define>

	<f:metadata>
		<f:viewAction action="#{dashboardBean.inicializar}" />
	</f:metadata>

	<ui:define name="head">

		<script type="text/javascript">
			function percentExtender_() {
	
				var options = $.extend(true, {}, this.cfg.config);
	
				this.cfg.config.options = {
					legend : {
						display : true,
					},
	
					scales : {
						xAxes : [ {
							display : true,
						} ]
					},
	
					tooltips : {
						callbacks : {
	
							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];
	
								if(data.datasets.length > 2) {
									if (tooltipItem.datasetIndex == 0
											|| tooltipItem.datasetIndex == 2) {
										var valor = "R$ " + numberToReal(amount);
										if (valor.includes("-.")) {
											valor = valor.replace("-.", "-");
										}
										return valor;
									} else {
										return numberToReal(amount) + "%";
									}
								} else {
									if (tooltipItem.datasetIndex == 0
											|| tooltipItem.datasetIndex == 1) {
										var valor = "R$ " + numberToReal(amount);
										if (valor.includes("-.")) {
											valor = valor.replace("-.", "-");
										}
										return valor;
									}
								}
							}
						}
					},
				};
	
				$.extend(true, this.cfg.config, options);
			}
			function percentExtender() {
				var tickColor = "#666";
				var gridlineColor = "rgba(0,0,0,0.1)";

				this.cfg.config.type = 'pie';

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Top 5 Despesas - Mês atual'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var total = eval(data.datasets[tooltipItem.datasetIndex].data
										.join("+"));

								var label = tooltipItem.yLabel;

								return numberToReal(amount)
										+ ' / '
										+ numberToReal(total)
										+ ' ( '
										+ parseFloat(amount * 100 / total)
												.toFixed(2) + '% )';
							}
						}
					},
				};
			}

			function percentExtender2() {

				var options = $.extend(true, {}, this.cfg.config);

				this.cfg.config.options = {
					legend : {
						display : true,
					},

					scales : {
						xAxes : [ {
							display : true,
						} ]
					},

					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								if (tooltipItem.datasetIndex == 1
										|| tooltipItem.datasetIndex == 0) {
									var valor = "R$ " + numberToReal(amount);
									if (valor.includes("-.")) {
										valor = valor.replace("-.", "-");
									}
									return valor;
								} else {
									return numberToReal(amount) + "%";
								}
							}
						}
					},
				};

				$.extend(true, this.cfg.config, options);
			}
			
			function percentExtender2_() {

				var options = $.extend(true, {}, this.cfg.config);

				this.cfg.config.options = {
					legend : {
						display : true,
					},
					
					title : {
						display : false,
						text : 'Despesas vs Receitas'
					},

					scales : {
						xAxes : [ {
							display : true,
						} ]
					},

					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var valor = "R$ " + numberToReal(amount);
								if (valor.includes("-.")) {
									valor = valor.replace("-.", "-");
								}
								return valor;
							}
						}
					},
				};

				$.extend(true, this.cfg.config, options);
			}

			function percentExtender3() {

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Total de Vendas vs Categoria'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								return numberToReal(amount);
							}
						}
					},
				};
			}

			function percentExtender4() {

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Estoque para Vendas vs Categoria'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								return numberToReal(amount);
							}
						}
					},
				};
			}

			function percentExtender5() {

				this.cfg.config.options = {
					legend : {
						display : true,
					},

					title : {
						display : true,
						text : ''
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var valor = numberToReal(amount);
								if (valor.includes("-.")) {
									valor = valor.replace("-.", "-");
								}
								return valor;
							}
						}
					},
				/*
				scales: {
				     yAxes: [{
				        display: true,
				        scaleLabel: {
				           display: true,
				           labelString: '',
				        },
				        ticks: {
				           callback: function (value, index, values) {
				               value = value * 100;
				              return "";
				           },
				        },
				     }]
				  }
				 */
				};
			}

			function numberToReal(numero) {
				var numero = numero.toFixed(2).split('.');
				numero[0] = "R$ " + numero[0].split(/(?=(?:...)*$)/).join('.');

				return numero.join(',');
			}
		</script>

		<style>
body .ui-datatable .ui-datatable-data>tr.ui-state-highlight {
	background-color: #d0e2f5 !important;
	color: #ffffff;
	border-color: #d8d8d88f;
}

body .ui-datatable .ui-datatable-data>tr.ui-state-hover {
	background-color: #d8d8d88f !important;
}

body .ui-state-active, body .ui-state-highlight {
	background-color: transparent !important;
}

body .ui-datatable thead th {
	display: none;
}

body .ui-datatable .ui-datatable-data>tr.ui-datatable-even {
	background-color: transparent;
	border-bottom: 1px solid #afc7ff;
}

body .ui-datatable .ui-datatable-data>tr {
	background-color: #f1f1f1;
}

body .ui-widget-content {
	background-color: transparent;
	border: 1px solid #b6b7c2;
}

body .ui-datatable .ui-datatable-data>tr {
	border-color: transparent;
}

body .ui-datatable .ui-datatable-data>tr td {
	padding: 0px 8px;
	/*font-weight: bold;*/
	font-size: 12px;
	color: #525252;
}

.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon i {
	color: #069ed2;
}

.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon {
	background-color: #197290;
}

.layout-wrapper .layout-main .layout-content {
	padding: 60px 17px 4px 17px;
}

.acesso-rapido a:hover {
	background: #f3f3f3;
}

@media ( min-width :220px) {
	.despesas-receitas {
		margin-top:5px;
	}
	.pizza {
		margin-top:5px;
	}
	.dashboard.saldo-geral_ .card {
	    margin-bottom: 0px;
	}
	.vendas-top5.ui-datatable tfoot td {
    	padding: 0px 6px;
    }
	.ui-datatable .ui-datatable-scrollable-body {
    	outline: none;
    	max-height: 157px;
    }
	.aw-box__icon {
    	color: #434560;
    }
	.dashboard.card_ .overview-box.overview-box-2 {
	    background-color: #16a00ac2;
	}
	.dashboard.card_ .overview-box.overview-box-2 .overview-box-details {
	    color: #286323;
	}
	.dashboard.card_ .overview-box.overview-box-2 .overview-box-icon {
    	background-color: #448238;
    }
    .dashboard.card_ .overview-box.overview-box-2 .overview-box-icon i {
	    color: #4eb745;
	}
	
	.dashboard.card_ .overview-box.overview-box-4 {
	    background-color: #ed3c3ce0;
	}
	.dashboard.card_ .overview-box.overview-box-4 .overview-box-icon i {
	    color: #ef5454;
	}
	.dashboard.card_ .overview-box.overview-box-4 .overview-box-icon {
    	background-color: #b52f2f;
    }
    .dashboard.card_ .overview-box.overview-box-4 .overview-box-details {
	    color: #922626;
	}
	
	.dashboard.card_ .overview-box.overview-box-3 {
	    background-color: #fb7933;
	}
	.dashboard.card_ .overview-box.overview-box-3 .overview-box-icon i {
	    color: #ff8e52;
	}
	.dashboard.card_ .overview-box.overview-box-3 .overview-box-icon {
    	background-color: #bd5b28;
    }
    .dashboard.card_ .overview-box.overview-box-3 .overview-box-details {
	    color: #ab4d1b;
	}
	
	.dashboard.card_ .overview-box.overview-box-1 {
    	background-color: #1e94d2;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-icon {
    	background-color: #096b9e;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-icon i {
    	color: #1e94d2;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-details {
    	color: #0b5a84;
    }

	.ui-datatable .ui-datatable-scrollable-footer {
    	background-color: transparent !important;
    }
    body .ui-datatable .ui-datatable-scrollable-header {
    	background-color: transparent !important;
    }
    body .ui-datatable .ui-datatable-data>tr {
	    background-color: #ffffff;
	}
	.layout-wrapper .layout-main .layout-content {
    	padding: 55px 17px 4px 17px;
    }
	.dashboard .card {
    	padding: 6px;
	}
	.dashboard-top.card .ui-lg-4 {
    	padding: 0em;
    }
    
    .dashboard-top.card .ui-lg-8 {
    	padding: 0em;
    }
    
    .dashboard-top.card .ui-lg-3 {
    	padding: .47em;
    }
    
    .dashboard .user-card {
	    margin-top: 3px;
	    border: none;
	    padding-right: 15px;
    }
    
    .dashboard .overview-box {
	    margin-top: 0px;
	}
    
    .dashboard.card {
    	margin-bottom: 8px;
    	padding: 0px;
    }
    
	.dashboard .user-card .user-card-content .user-detail ul li {
	    padding: 6px 24px;
	}
	.dashboard .user-card .user-card-content {
    	min-height: auto;
    }
    .dashboard .user-card .user-card-content .user-detail ul {
    	padding: 0px;
    }
	body .ui-datatable tfoot td {
		background-color: transparent;
		padding: 6px 10px;
		border-color: transparent;
		color: #0d4f98;
		font-size: 12px !important;
		/*font-weight: bold;*/
		border-bottom: none !important;
		width: auto !important;
	}
	.ui-grid-col-3 {
		width: 25%;
	}
	#info-detalhes .ui-panelgrid .ui-panelgrid-cell:nth-child(2n),
		#info-detalhes-estoque .ui-panelgrid .ui-panelgrid-cell:nth-child(2n)
		{
		text-align: end;
	}
	#info-detalhes .ui-datatable table, #info-detalhes-estoque .ui-datatable table
		{
		width: auto;
	}
	#info-detalhes.ui-widget-content, #info-detalhes-estoque.ui-widget-content,
		#downloadLoading.ui-widget-content, #produto-dialog.ui-widget-content
		{
		border: none;
	}
	.ui-grid-responsive .ui-grid-row {
		display: flex;
	}
	.dashboard-top {
		margin-top: -5px;
	}
	.dashboard-bottom {
		margin-top: -10px;
	}
	.dashboard-bottom.card {
		padding: 0px;
		text-align:center;
	}
	.fluxo-caixa {
		margin-top: -20px;
	}
	.ui-datatable table {
		border-collapse: separate;
	}
	.ui-datatable tbody td {
		height: 25px;
	}
	.fluxo-caixa tr td:nth-child(1) {
		border-bottom: 1.3px solid rebeccapurple;
	}
	.fluxo-caixa tr td:nth-child(2) {
		border-bottom: 1px solid #0e71dc;
	}
	.vendas-top5 tr td:nth-child(2n-1) {
		border-bottom: 1.3px solid rebeccapurple;
	}
	.vendas-top5 tr td:nth-child(2) {
		border-bottom: 1px solid #0e71dc;
	}
	.dashboard .overview-box .overview-box-content .overview-box-title {
		font-weight: bold;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-details {
		color: #efefef;
		font-size: 12px;
	}
	.dashboard .overview-box .overview-box-content .overview-box-stats {
		font-size: 24px;
	}
	.dashboard .acesso.overview-box.overview-box-3 {
		background-color: #ffffff;
		border: 1px solid #a7a7a7;
		border-radius: 5px;
	}
	.dashboard .acesso.overview-box.overview-box-3 .overview-box-details {
		color: #e5d7ff;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 {
		background-color: #069ed2;
		border-radius: 5px;
		height: 138px;
	}
	.dashboard .overview-box .overview-box-content {
		margin-top: 12px;
		margin-left: 15px;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon {
		margin-top: -1px;
	}
}

@media ( min-width :460px) {
	.despesas-receitas {
		margin-top:0px;
	}
	.pizza {
		margin-top:0px;
	}
	.ui-datatable .ui-datatable-scrollable-body {
    	max-height: 118px;
    }
    .dashboard-bottom.card {
	    text-align: left;
	}
	.ui-grid-col-3 {
		width: 100%;
	}
	.dashboard-top {
		margin-top: -5px;
	}
	.dashboard-bottom {
		margin-top: -10px;
	}
	.fluxo-caixa {
		margin-top: 35px;
	}
	.acesso-rapido .ui-lg-3 {
		padding: 0em !important;
		width: 100%;
	}
	body .ui-datatable .ui-datatable-data>tr td {
		font-size: 14px !important;
		font-family: "Source Sans Pro", "Helvetica Neue", sans-serif !important;
	}
	body .ui-datatable tfoot td {
		font-size: 14px !important;
	}
}
</style>
	</ui:define>

	<ui:define name="content">

		<div class="page-header">
			<h1>Resumo Financeiro</h1>
			
			<p:panel style="float: right;position: absolute;top: 0;right: 0; margin-top: 82px;margin-right: 24px;" rendered="false">
			<p:outputLabel 
				value="Empresa: #{seguranca.usuarioLogado.usuario.empresa}. " /> <p:link href="/Empresas.xhtml">Trocar</p:link>
			</p:panel>
		</div>

		<h:form id="form">
				
				
				<div class="ui-g dashboard card card_" style="margin-top: -10px;width:100%;">
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-check  fa-3x"></i>
							</div>
							<div class="aw-box__value"><h:outputText value="#{dashboardBean.totalContasRecebidasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
							<div class="aw-box__title">Contas recebidas Hoje #{dashboardBean.hoje}</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-thumbs-o-down  fa-3x"></i>
							</div>
							<div class="aw-box__value"><h:outputText value="#{dashboardBean.totalAReceberEmAtrasoValor}"><f:convertNumber type="currency" /></h:outputText></div>
							<div class="aw-box__title">Contas à receber em atraso</div>
						</div>
					</div>
		
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-barcode  fa-3x"></i>
							</div>
							<div class="aw-box__value"><h:outputText value="#{dashboardBean.totalDespesasPagasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
							<div class="aw-box__title">Contas pagas Hoje #{dashboardBean.hoje}</div>
						</div>
					</div>
		
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-exclamation-circle  fa-3x"></i>
							</div>
							<div class="aw-box__value"><h:outputText value="#{dashboardBean.totalAPagarEmAtrasoValor}"><f:convertNumber type="currency" /></h:outputText></div>
							<div class="aw-box__title">Contas à pagar em atraso</div>
						</div>
					</div>
				</div>
		
				
				
				<div class="ui-g dashboard card card_" style="margin-top: -2px;width:100%;">
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-2">
							<div class="overview-box-icon">
								<i class="fa fa-money" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total de receitas <span style="font-size:9px;">Hoje (<h:outputText value="#{dashboardBean.hoje}" />)</span></div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalReceitasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalLancamentosReceitasHojeValor}"><f:convertNumber type="currency" /></h:outputText> em lançamentos</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-3">
							<div class="overview-box-icon">
								<i class="fa fa-diamond" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total contas à receber</div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalAReceberValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalAReceberHojeValor}"><f:convertNumber type="currency" /></h:outputText> à receber em #{dashboardBean.hoje}</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-4">
							<div class="overview-box-icon">
								<i class="fa fa-coffee" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total de despesas <span style="font-size:9px;">Hoje (<h:outputText value="#{dashboardBean.hoje}" />)</span></div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalDespesasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalLancamentosDespesasHojeValor}"><f:convertNumber type="currency" /></h:outputText> em lançamentos</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-1">
							<div class="overview-box-icon">
								<i class="fa fa-eur" /> 
							</div>  
							<div class="overview-box-content">
								<div class="overview-box-title">Total contas à pagar</div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalAPagarValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details" style="color: #ececec;"><h:outputText value="#{dashboardBean.totalAPagarHojeValor}"><f:convertNumber type="currency" /></h:outputText> à pagar em #{dashboardBean.hoje}</div>
							</div>
						</div>
					</div>
					
				</div>
				
				
				
				
				<div class="ui-g-12 dashboard-bottom card" style="margin-top: -2px;">
					<div class="ui-g-12 ui-lg-8 ui-xl-8 despesas-receitas">
						
						<label style="font-weight: bold; font-size: 14px">Despesas x Receitas</label>
							
						<p:barChart id="barChart-despesasPorDia" 
							model="#{dashboardBean.mixedModelPorDia}"
							styleClass="barChart-01" style="width: 100%;margin-top: 5px;" />
					</div>
					
					<div class="ui-g-12 ui-lg-4 ui-xl-4 pizza">
						
						<div style="text-align:center;">
							<label style="font-weight: bold; font-size: 14px;color:#585757;">Rank de Despesas - Mês atual</label>
						</div>
						
						<p:pieChart model="#{dashboardBean.pieModel}"
							style="width: 100%; height: 200px;margin-top: 8px;" />
							
						<p:dataTable scrollable="true" scrollHeight="118"
							value="#{dashboardBean.top5Despesas}" var="top5Despesa"
							styleClass="vendas-top5">

							<p:column headerText="Categoria" width="60%"
								style="text-align:left;">
								<h:outputText value="#{top5Despesa.item}" />
							</p:column>

							<p:column headerText="Valor" width="40%" style="text-align:right">
								<h:outputText value="#{top5Despesa.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:columnGroup type="footer">
								<p:row>
									<p:column style="text-align:right" footerText="Total:" />
									<p:column style="text-align:right"
										footerText="R$ #{dashboardBean.totalDespesasTop5}" />
								</p:row>
							</p:columnGroup>

						</p:dataTable>
					</div>
				</div>	

		</h:form>

		<p:dialog header="Informações detalhadas" widgetVar="info-detalhes"
			id="info-detalhes" resizable="false" modal="true" position="top"
			style="margin-top: 100px" closeOnEscape="true" responsive="true"
			width="350px">

			<h:form id="form-dialog" style="margin-top: 10px;">

				<div class="ui-fluid">

					<div class="card card-w-title ui-fluid"
						style="padding: 0px 5px 0px 5px; padding-bottom: 0px !important; margin-bottom: 10px;">

						<p:panelGrid columns="2" layout="grid"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-3, ui-grid-col-5">

							<p:outputLabel style="font-weight: bold" value="Categoria: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.item}">
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold"
								value="Valor total de vendas: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.value}"
								style="color: #0db130;font-weight: bold;font-size: 14px;">
								<f:convertNumber type="currency" />
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold" value="Total de itens: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.quantidade}"
								style="font-weight: bold;font-size: 14px;">
							</p:outputLabel>
						</p:panelGrid>

						<p:panelGrid columns="1" layout="grid"
							style="text-align:center;background: #f9f9f9;"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-12">

							<p:outputLabel style="font-weight: bold" value="Produtos " />
						</p:panelGrid>

						<p:dataTable id="fluxoTable5"
							value="#{dashboardBean.detalhesVendasPorProduto}" var="produto"
							scrollable="true" scrollHeight="337" styleClass="vendas-top5">

							<p:column headerText="Produto" style="text-align:left;width:65%">
								<p:commandLink value="#{produto.item}" process="@this"
									update="produto-dialog" style="color: #023961;"
									actionListener="#{dashboardBean.carregarProduto(produto.codigo)}"
									onstart="start();"
									oncomplete="PF('produto-dialog').show();stop();" />
							</p:column>

							<p:column headerText="Valor" style="text-align:right;width:30%">
								<h:outputText value="#{produto.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Quantidade"
								style="text-align:right;width:20%">
								<h:outputText value="#{produto.quantidade}">
								</h:outputText>
							</p:column>

						</p:dataTable>

						<p:commandButton process="@this" ajax="false"
							icon="fa fa-fw fa-file-pdf-o" rendered="false"
							style="width: 120px;background: #f9f9f9;border-radius: 2px;color: #0e71dc;float: left;margin-top: 15px;border: 1px solid #dcdcdc;"
							value="Baixar lista">
							<p:dataExporter type="pdf" target="fluxoTable5"
								fileName="#{dashboardBean.vendaPorCategoriaSelecionada.item}" />
						</p:commandButton>

						<p:commandButton icon="fa fa-fw fa-close"
							style="margin-top: 15px; margin-bottom: 2px;float:right;font-weight: bold;width: 120px;background: #fd6161;color: #ffffff;"
							value="Fechar" onstart="start();"
							oncomplete="stop();PF('info-detalhes').hide();">
						</p:commandButton>

					</div>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="Informações detalhadas"
			widgetVar="info-detalhes-estoque" id="info-detalhes-estoque"
			resizable="false" modal="true" position="top"
			style="margin-top: 100px" closeOnEscape="true" responsive="true"
			width="350px">

			<h:form id="form-dialog-estoque" style="margin-top: 10px;">

				<div class="ui-fluid">

					<div class="card card-w-title ui-fluid"
						style="padding: 0px 5px 0px 5px; padding-bottom: 0px !important; margin-bottom: 10px;">

						<p:panelGrid columns="2" layout="grid"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-3, ui-grid-col-5">

							<p:outputLabel style="font-weight: bold" value="Categoria: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.item}">
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold"
								value="Valor em estoque: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.value}"
								style="color: #0db130;font-weight: bold;font-size: 14px;">
								<f:convertNumber type="currency" />
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold" value="Total de itens: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.quantidade}"
								style="font-weight: bold;font-size: 14px;">
							</p:outputLabel>
						</p:panelGrid>

						<p:panelGrid columns="1" layout="grid"
							style="text-align:center;background: #f9f9f9;"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-12">

							<p:outputLabel style="font-weight: bold" value="Produtos " />
						</p:panelGrid>

						<p:dataTable id="fluxoTable6"
							value="#{dashboardBean.detalhesEstoquePorProduto}" var="produto"
							scrollable="true" scrollHeight="337" styleClass="vendas-top5">

							<p:column headerText="Produto" style="text-align:left;width:65%">
								<p:commandLink value="#{produto.item}" process="@this"
									update="produto-dialog" style="color: #023961;"
									actionListener="#{dashboardBean.carregarProduto(produto.codigo)}"
									onstart="start();"
									oncomplete="PF('produto-dialog').show();stop();" />
							</p:column>

							<p:column headerText="Valor" style="text-align:right;width:30%">
								<h:outputText value="#{produto.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Quantidade"
								style="text-align:right;width:20%">
								<h:outputText value="#{produto.quantidade}">
								</h:outputText>
							</p:column>

						</p:dataTable>

						<p:commandButton process="@this" ajax="false"
							icon="fa fa-fw fa-file-pdf-o" action="#{dashboardBean.baixarLista}" 
							style="width: 120px;background: #f9f9f9;border-radius: 2px;color: #0e71dc;float: left;margin-top: 15px;border: 1px solid #dcdcdc;"
							value="Baixar lista">
						</p:commandButton>

						<p:commandButton icon="fa fa-fw fa-close"
							style="margin-top: 15px; margin-bottom: 2px;float:right;font-weight: bold;width: 120px;background: #fd6161;color: #ffffff;"
							value="Fechar" onstart="start();"
							oncomplete="stop();PF('info-detalhes-estoque').hide();">
						</p:commandButton>

					</div>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="Produto selecionado" widgetVar="produto-dialog"
			position="top" style="margin-top: 100px" id="produto-dialog"
			resizable="false" modal="true" closeOnEscape="true" responsive="true"
			styleClass="fotoDialog">

			<h:form id="form-dialogProduto">

				<div class="ui-fluid" style="margin-top: 10px; text-align: center">
					<ui:fragment id="photo"
						rendered="#{dashboardBean.produto.urlImagem != null}">
						<img src="#{dashboardBean.produto.urlImagem}"
							style="width: 200px; height: 250px;" />
					</ui:fragment>

					<div
						style="width: 80%; margin: auto; border-top: 1px solid #ccc; margin-top: 10px; margin-bottom: 10px"></div>

					<p:button icon="fa fa-fw fa-list" disabled="#{seguranca.usuarioLogado.usuario.empresa eq 'Havaianas'}"
						style="margin-bottom: 5px;font-weight: bold;float: right;width: 100px;margin-right: 5px;background:#147df0"
						value="Detalhes" id="foto-button"
						outcome="/cadastros/CadastroProdutos.xhtml" onclick="start();">

						<f:param name="id" value="#{dashboardBean.produtoId}" />
					</p:button>

					<p:commandButton icon="fa fa-fw fa-close"
						style="margin-bottom: 5px;font-weight: bold;width: 100px;background:#e15e5ef0;"
						value="Fechar" onstart="start();"
						oncomplete="stop();PF('produto-dialog').hide();">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog id="downloadLoading" showHeader="false" modal="true"
			widgetVar="downloadLoading" header="Status" draggable="false"
			closable="false" resizable="false">
			<p:graphicImage name="images/loadingbar.gif"
				library="manhattan-layout" width="50" />
		</p:dialog>

		<script type="text/javascript">
			function start() {
				PF('downloadLoading').show();
			}

			function stop() {
				PF('downloadLoading').hide();
			}
		</script>

	</ui:define>

</ui:composition>
