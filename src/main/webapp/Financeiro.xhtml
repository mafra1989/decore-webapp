<ui:composition xmlns="http://www.w3.org/1999/xhtml"
	xmlns:h="http://java.sun.com/jsf/html"
	xmlns:f="http://java.sun.com/jsf/core"
	xmlns:ui="http://java.sun.com/jsf/facelets"
	xmlns:p="http://primefaces.org/ui" template="/WEB-INF/template.xhtml">

	<ui:define name="title">Resumo Financeiro</ui:define>

	<f:metadata>
		<f:viewAction action="#{dashboardBean.inicializar}" />
		<f:viewAction action="#{consultaContasBean.inicializar}" />
	</f:metadata>

	<ui:define name="head">

		<script type="text/javascript">
			function percentExtender_() {
	
				var options = $.extend(true, {}, this.cfg.config);
	
				this.cfg.config.options = {
					legend : {
						display : true,
					},
	
					scales : {
						xAxes : [ {
							display : true,
						} ]
					},
	
					tooltips : {
						callbacks : {
	
							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];
	
								if(data.datasets.length > 2) {
									if (tooltipItem.datasetIndex == 0
											|| tooltipItem.datasetIndex == 2) {
										var valor = "R$ " + numberToReal(amount);
										if (valor.includes("-.")) {
											valor = valor.replace("-.", "-");
										}
										return valor;
									} else {
										return numberToReal(amount) + "%";
									}
								} else {
									if (tooltipItem.datasetIndex == 0
											|| tooltipItem.datasetIndex == 1) {
										var valor = "R$ " + numberToReal(amount);
										if (valor.includes("-.")) {
											valor = valor.replace("-.", "-");
										}
										return valor;
									}
								}
							}
						}
					},
				};
	
				$.extend(true, this.cfg.config, options);
			}
			function percentExtender() {
				var tickColor = "#666";
				var gridlineColor = "rgba(0,0,0,0.1)";

				this.cfg.config.type = 'pie';

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Top 5 Despesas - Mês atual'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var total = eval(data.datasets[tooltipItem.datasetIndex].data
										.join("+"));

								var label = tooltipItem.yLabel;

								return numberToReal(amount)
										+ ' / '
										+ numberToReal(total)
										+ ' ( '
										+ parseFloat(amount * 100 / total)
												.toFixed(2) + '% )';
							}
						}
					},
				};
			}

			function percentExtender2() {

				var options = $.extend(true, {}, this.cfg.config);

				this.cfg.config.options = {
					legend : {
						display : true,
					},

					scales : {
						xAxes : [ {
							display : true,
						} ]
					},

					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								if (tooltipItem.datasetIndex == 1
										|| tooltipItem.datasetIndex == 0) {
									var valor = "R$ " + numberToReal(amount);
									if (valor.includes("-.")) {
										valor = valor.replace("-.", "-");
									}
									return valor;
								} else {
									return numberToReal(amount) + "%";
								}
							}
						}
					},
				};

				$.extend(true, this.cfg.config, options);
			}
			
			function percentExtender2_() {

				var options = $.extend(true, {}, this.cfg.config);

				this.cfg.config.options = {
					legend : {
						display : true,
					},
					
					title : {
						display : false,
						text : 'Despesas vs Receitas'
					},

					scales : {
						xAxes : [ {
							display : true,
						} ]
					},

					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var valor = "R$ " + numberToReal(amount);
								if (valor.includes("-.")) {
									valor = valor.replace("-.", "-");
								}
								return valor;
							}
						}
					},
				};

				$.extend(true, this.cfg.config, options);
			}

			function percentExtender3() {

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Total de Vendas vs Categoria'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								return numberToReal(amount);
							}
						}
					},
				};
			}

			function percentExtender4() {

				this.cfg.config.options = {
					legend : {
						display : false,
					},

					title : {
						display : false,
						text : 'Estoque para Vendas vs Categoria'
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								return numberToReal(amount);
							}
						}
					},
				};
			}

			function percentExtender5() {

				this.cfg.config.options = {
					legend : {
						display : true,
					},

					title : {
						display : true,
						text : ''
					},
					tooltips : {
						callbacks : {

							label : function(tooltipItem, data) {
								var amount = data.datasets[tooltipItem.datasetIndex].data[tooltipItem.index];

								var valor = numberToReal(amount);
								if (valor.includes("-.")) {
									valor = valor.replace("-.", "-");
								}
								return valor;
							}
						}
					},
				/*
				scales: {
				     yAxes: [{
				        display: true,
				        scaleLabel: {
				           display: true,
				           labelString: '',
				        },
				        ticks: {
				           callback: function (value, index, values) {
				               value = value * 100;
				              return "";
				           },
				        },
				     }]
				  }
				 */
				};
			}

			function numberToReal(numero) {
				var numero = numero.toFixed(2).split('.');
				numero[0] = "R$ " + numero[0].split(/(?=(?:...)*$)/).join('.');

				return numero.join(',');
			}
		</script>

		<style>
body .vendas-top5.ui-datatable .ui-datatable-data>tr.ui-state-highlight {
	background-color: #d0e2f5 !important;
	color: #ffffff;
	border-color: #d8d8d88f;
}

body .vendas-top5.ui-datatable .ui-datatable-data>tr.ui-state-hover {
	background-color: #d8d8d88f !important;
}

body .vendas-top5 .ui-state-active, body .vendas-top5 .ui-state-highlight {
	background-color: transparent !important;
}

body .vendas-top5.ui-datatable thead th {
	display: none;
}

body .vendas-top5.ui-datatable .ui-datatable-data>tr.ui-datatable-even {
	background-color: transparent;
	border-bottom: 1px solid #afc7ff;
}

body .vendas-top5.ui-datatable .ui-datatable-data>tr {
	background-color: #f1f1f1;
}

body .vendas-top5.ui-datatable .ui-datatable-data>tr {
	border-color: transparent;
}

body .vendas-top5.ui-datatable .ui-datatable-data>tr td {
	padding: 0px 8px;
	/*font-weight: bold;*/
	font-size: 12px;
	color: #525252;
}

body .vendas-top5.ui-widget-content {
	background-color: transparent;
	border: 1px solid #b6b7c2;
}

body #contas-dialog .ui-panel .ui-panel-content {
    border: none;
}

body #contas-dialog .ui-panel .ui-panel-content {
    padding: 0px;
}

#contas-dialog .card.card-w-title {
    padding-bottom: 0px;
}

#contas-dialog .card {
    margin-bottom: 0px;
}

#contas-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title {
    float: left;
}

#contas-dialog .ui-datatable tbody td {
    height: auto !important;
}

#pagamentos-dialog .ui-datatable-scrollable-theadclone, #pagamentos-hoje-dialog .ui-datatable-scrollable-theadclone {
    border: 1px solid #b6b7c2;
}
    
body #pagamentos-dialog .ui-panel .ui-panel-content, body #pagamentos-hoje-dialog .ui-panel .ui-panel-content {
    border: none;
}

body #pagamentos-dialog .ui-panel .ui-panel-content, body #pagamentos-hoje-dialog .ui-panel .ui-panel-content {
    padding: 0px;
}

#pagamentos-dialog .card.card-w-title, #pagamentos-hoje-dialog .card.card-w-title {
    padding-bottom: 0px;
}

#pagamentos-dialog .card, #pagamentos-hoje-dialog .card {
    margin-bottom: 0px;
}
#pagamentos-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title,
 #pagamentos-hoje-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title {
    float: left;
}

#pagamentos-dialog .ui-datatable tbody td, #pagamentos-hoje-dialog .ui-datatable tbody td {
    height: auto !important;
}

.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon i {
	color: #069ed2;
}

.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon {
	background-color: #197290;
}

.layout-wrapper .layout-main .layout-content {
	padding: 60px 17px 4px 17px;
}

.acesso-rapido a:hover {
	background: #f3f3f3;
}

@media ( min-width :220px) {
	.filtro-vendas-clientes.hide {
		max-height: 0;
		pointer-events: none;
		transition: max-height 0.3s ease-in-out;
	}
	.filtro-vendas-clientes {
		overflow: hidden;
		max-height: 300px;
		transition: max-height 1s ease-in-out;
	}
	.ui-inputswitch .ui-inputswitch-handle {
	    width: 28px !important;
	}
	
	.ui-inputswitch {
	    width: 60px !important;
	}
	
	.ui-inputswitch .ui-inputswitch-off {
	    width: 32px !important;
	}
	.ui-datepicker-touch-ui.ui-datepicker td a, .ui-datepicker-touch-ui.ui-datepicker td span, .ui-datepicker-touch-ui.ui-datepicker th {
	    padding: 10px;   
	}
	.p-datepicker .ui-datepicker-touch-ui, .ui-datepicker-touch-ui {
	    min-width: 300px;
	    border: none;
    }
    body .ui-fluid .ui-trigger-calendar .ui-datepicker-trigger.ui-button {
	    height: 29px !important;
	}
	body #contas-dialog .ui-selectonemenu {
	    margin-top: 11px;
	    margin-left: 10px;
	    min-width: 178px !important;
    }
	#contas-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"]:not(.ui-helper-hidden) {
	    text-align: left;
	    display: block;
	    border: 0 none;
	    width: 100%;
	    -webkit-box-sizing: border-box;
	    -moz-box-sizing: border-box;
	    box-sizing: border-box;
	    float: left;
	    clear: left;
	}
	#contas-dialog .ui-datatable-reflow thead th, .ui-datatable-reflow tfoot td {
	    display: none;
	}
	#contas-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title {
	    padding: 0.4em;
	    min-width: 30%;
	    display: inline-block;
	    margin: -0.4em 1em -0.4em -0.4em;
	}
	
	#filtros-dialog .ui-selectonemenu {
		display: flex !important;
	}
	
	#filtros-dialog .ui-panel .ui-panel-content {
	    border: none;
	    padding: 0px;
	}
	
	#filtros-dialog .filtro-vendas.ui-panelgrid .ui-panelgrid-cell {
	    padding: 0px 0px;
	}
	
	#filtros-dialog .filtro-vendas-clientes.ui-panelgrid .ui-panelgrid-cell {
	    padding: 0px 0px;
	}
	
	#pagamentos-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"]:not(.ui-helper-hidden),
		#pagamentos-hoje-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"]:not(.ui-helper-hidden) {
	    text-align: left;
	    display: block;
	    border: 0 none;
	    width: 100%;
	    -webkit-box-sizing: border-box;
	    -moz-box-sizing: border-box;
	    box-sizing: border-box;
	    float: left;
	    clear: left;
	}
	#pagamentos-dialog .ui-datatable-reflow thead th, .ui-datatable-reflow tfoot td,
	 #pagamentos-hoje-dialog .ui-datatable-reflow thead th {
	    display: none;
	}
	#pagamentos-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title, 
	 #pagamentos-hoje-dialog .ui-datatable-reflow .ui-datatable-data td[role="gridcell"] .ui-column-title {
	    padding: 0.4em;
	    min-width: 50%;
	    display: inline-block;
	    margin: -0.4em 1em -0.4em -0.4em;
	}
	
	.swal2-popup {
		width: 28em;
		max-width: 100%;
		padding: 0 0 0.4em 0;
		font-size: 0.75rem;
	}
	.swal2-popup #swal2-content {
		font-weight: 400;
	}
	body #pagamento-dialog .ui-datepicker {
   		width: 275px;
    }
    body #pagamento-dialog .ui-panel .ui-panel-content {
	    border: none;
	    padding: 0px 0px 0px 0px;
	}
	.pagar.ui-state-disabled {
	    opacity: 1;
	}
	#contas-dialog .ui-inputswitch .ui-inputswitch-off {
	    background-color: #f15b5b !important;
	}
	.pagar .ui-state-active, #contasPagas .ui-state-highlight, .pagar .ui-state-highlight {
	    background-color: #46bb68 !important;
	}
	#contas-dialog {
		width: 370px !important;
	}
	#contas-dialog .btn-filtro {
		color: #363535;
    	background-color: #ffffff;
    	border: 1px solid #5a5a5ab0;
    	margin-top: 10px;
    	margin-left: 10px;
	}
	#contas-dialog .btn-filtro.ui-state-hover {
		background-color: #f7f7f7;
	}
	#contas-dialog .btn-filtro.ui-state-active {
		background-color: #f7f7f7;
	}
	.despesas-receitas {
		margin-top:5px;
	}
	.pizza {
		margin-top:5px;
	}
	
	.dashboard.saldo-geral_ .card {
	    margin-bottom: 0px;
	}
	.vendas-top5.ui-datatable tfoot td:nth-child(2n-1) {
    	padding: 0px 0px;
    }
	.vendas-top5.ui-datatable .ui-datatable-scrollable-body {
    	outline: none;
    	max-height: 157px;
    }
	.aw-box__icon {
    	color: #434560;
    }
	.dashboard.card_ .overview-box.overview-box-2 {
	    background-color: #16a00ac2;
	}
	.dashboard.card_ .overview-box.overview-box-2 .overview-box-details {
	    color: #286323;
	}
	.dashboard.card_ .overview-box.overview-box-2 .overview-box-icon {
    	background-color: #448238;
    }
    .dashboard.card_ .overview-box.overview-box-2 .overview-box-icon i {
	    color: #4eb745;
	}
	
	.dashboard.card_ .overview-box.overview-box-4 {
	    background-color: #ed3c3ce0;
	}
	.dashboard.card_ .overview-box.overview-box-4 .overview-box-icon i {
	    color: #ef5454;
	}
	.dashboard.card_ .overview-box.overview-box-4 .overview-box-icon {
    	background-color: #b52f2f;
    }
    .dashboard.card_ .overview-box.overview-box-4 .overview-box-details {
	    color: #922626;
	}
	
	.dashboard.card_ .overview-box.overview-box-3 {
	    background-color: #fb7933;
	}
	.dashboard.card_ .overview-box.overview-box-3 .overview-box-icon i {
	    color: #ff8e52;
	}
	.dashboard.card_ .overview-box.overview-box-3 .overview-box-icon {
    	background-color: #bd5b28;
    }
    .dashboard.card_ .overview-box.overview-box-3 .overview-box-details {
	    color: #ab4d1b;
	}
	
	.dashboard.card_ .overview-box.overview-box-1 {
    	background-color: #1e94d2;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-icon {
    	background-color: #096b9e;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-icon i {
    	color: #1e94d2;
    }
    .dashboard.card_ .overview-box.overview-box-1 .overview-box-details {
    	color: #0b5a84;
    }

	.vendas-top5.ui-datatable .ui-datatable-scrollable-footer {
    	background-color: transparent !important;
    }
    body .vendas-top5.ui-datatable .ui-datatable-scrollable-header {
    	background-color: transparent !important;
    }
    body .vendas-top5.ui-datatable .ui-datatable-data>tr {
	    background-color: #ffffff;
	}
	.layout-wrapper .layout-main .layout-content {
    	padding: 55px 17px 4px 17px;
    }
	.dashboard .card {
    	padding: 6px;
	}
	.dashboard-top.card .ui-lg-4 {
    	padding: 0em;
    }
    
    .dashboard-top.card .ui-lg-8 {
    	padding: 0em;
    }
    
    .dashboard-top.card .ui-lg-3 {
    	padding: .47em;
    }
    
    .dashboard .user-card {
	    margin-top: 3px;
	    border: none;
	    padding-right: 15px;
    }
    
    .dashboard .overview-box {
	    margin-top: 0px;
	}
    
    .dashboard.card {
    	margin-bottom: 8px;
    	padding: 0px;
    }
    
	.dashboard .user-card .user-card-content .user-detail ul li {
	    padding: 6px 24px;
	}
	.dashboard .user-card .user-card-content {
    	min-height: auto;
    }
    .dashboard .user-card .user-card-content .user-detail ul {
    	padding: 0px;
    }
	body .vendas-top5.ui-datatable tfoot td {
		background-color: transparent;
		padding: 6px 10px;
		border-color: transparent;
		color: #0d4f98;
		font-size: 12px !important;
		/*font-weight: bold;*/
		border-bottom: none !important;
		width: auto !important;
	}
	.ui-grid-col-3 {
		width: 25%;
	}
	#info-detalhes .ui-panelgrid .ui-panelgrid-cell:nth-child(2n),
		#info-detalhes-estoque .ui-panelgrid .ui-panelgrid-cell:nth-child(2n)
		{
		text-align: end;
	}
	#info-detalhes .ui-datatable table, #info-detalhes-estoque .ui-datatable table
		{
		width: auto;
	}
	#info-detalhes.ui-widget-content, #info-detalhes-estoque.ui-widget-content,
		#downloadLoading.ui-widget-content, #produto-dialog.ui-widget-content
		{
		border: none;
	}
	.ui-grid-responsive .ui-grid-row {
		display: flex;
	}
	.dashboard-top {
		margin-top: -5px;
	}
	.dashboard-bottom {
		margin-top: -10px;
	}
	.dashboard-bottom.card {
		padding: 0px;
		text-align:center;
	}
	.fluxo-caixa {
		margin-top: -20px;
	}
	.vendas-top5 .ui-datatable table {
		border-collapse: separate;
	}
	.vendas-top5 .ui-datatable tbody td {
		height: 25px;
	}
	.fluxo-caixa tr td:nth-child(1) {
		border-bottom: 1.3px solid rebeccapurple;
	}
	.fluxo-caixa tr td:nth-child(2) {
		border-bottom: 1px solid #0e71dc;
	}
	.vendas-top5 tr td:nth-child(2n-1) {
		border-bottom: 1.3px solid rebeccapurple;
	}
	.vendas-top5 tr td:nth-child(2) {
		border-bottom: 1px solid #0e71dc;
	}
	.dashboard .overview-box .overview-box-content .overview-box-title {
		font-weight: bold;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-details {
		color: #efefef;
		font-size: 12px;
	}
	.dashboard .overview-box .overview-box-content .overview-box-stats {
		font-size: 24px;
	}
	.dashboard .acesso.overview-box.overview-box-3 {
		background-color: #ffffff;
		border: 1px solid #a7a7a7;
		border-radius: 5px;
	}
	.dashboard .acesso.overview-box.overview-box-3 .overview-box-details {
		color: #e5d7ff;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 {
		background-color: #069ed2;
		border-radius: 5px;
		height: 138px;
	}
	.dashboard .overview-box .overview-box-content {
		margin-top: 12px;
		margin-left: 8px;
	}
	.dashboard .saldo-geral.overview-box.overview-box-1 .overview-box-icon {
		margin-top: -1px;
	}
}

@media ( min-width :460px) {
	#contas-dialog {
		/*width: 850px !important;*/
	}
	.despesas-receitas {
		margin-top:0px;
	}
	.pizza {
		margin-top:0px;
	}
	.vendas-top5 .ui-datatable .ui-datatable-scrollable-body {
    	max-height: 118px;
    }
    .dashboard-bottom.card {
	    text-align: left;
	}
	.ui-grid-col-3 {
		width: 100%;
	}
	.dashboard-top {
		margin-top: -5px;
	}
	.dashboard-bottom {
		margin-top: -10px;
	}
	.fluxo-caixa {
		margin-top: 35px;
	}
	.acesso-rapido .ui-lg-3 {
		padding: 0em !important;
		width: 100%;
	}
	body .vendas-top5.ui-datatable .ui-datatable-data>tr td {
		font-size: 14px !important;
		font-family: "Source Sans Pro", "Helvetica Neue", sans-serif !important;
	}
	body .vendas-top5.ui-datatable tfoot td {
		font-size: 14px !important;
	}
}
</style>
	</ui:define>

	<ui:define name="content">

		<div class="page-header">
			<h1>Resumo Financeiro</h1>
			
			<p:panel style="float: right;position: absolute;top: 0;right: 0; margin-top: 82px;margin-right: 24px;" rendered="false">
			<p:outputLabel 
				value="Empresa: #{seguranca.usuarioLogado.usuario.empresa}. " /> <p:link href="/Empresas.xhtml">Trocar</p:link>
			</p:panel>
		</div>

		<h:form id="form">
				
				<p:growl id="msg" closable="true" life="2000" showSummary="false"
					showDetail="true" style="text-align: center" />
						
				<p:remoteCommand name="buscarContasAPagarEmAtraso" 
					update="contas-dialog form-contas" 
					actionListener="#{consultaContasBean.buscarContasAPagarEmAtraso}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />
					
				<p:remoteCommand name="buscarContasAReceberEmAtraso" 
					update="contas-dialog form-contas" 
					actionListener="#{consultaContasBean.buscarContasAReceberEmAtraso}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />
				
				<p:remoteCommand name="buscarContasRecebidasHoje" 
					update="contas-dialog form-contas" 
					actionListener="#{consultaContasBean.buscarContasRecebidasHoje}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />					
					
				<p:remoteCommand name="buscarContasPagasHoje" 
					update="contas-dialog form-contas" 
					actionListener="#{consultaContasBean.buscarContasPagasHoje}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />
					
				<p:remoteCommand name="buscarContasAReceber" 
					update="contas-dialog form-contas form-filtros" 
					actionListener="#{consultaContasBean.buscarContasAReceber}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />
					
				<p:remoteCommand name="buscarContasAPagar" 
					update="contas-dialog form-contas" 
					actionListener="#{consultaContasBean.buscarContasAPagar}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();PF('contas-dialog').show();" />
				
				<p:remoteCommand name="setarItemID" process="@this form form-pagamentos form-contas"
					update="form form-contas" action="#{consultaContasBean.estornarTelaResumoFinanceiro}"
					onstart="PF('downloadLoading').show();"
					oncomplete="PF('downloadLoading').hide();" />
									
				
				<div class="ui-g dashboard card card_" style="margin-top: -10px;width:100%;">
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-check  fa-3x"></i>
							</div>
							<div class="aw-box__value">
								<p:link href="javascript:void(0);"
										onclick="contasRecebidasHoje();">
									<h:outputText value="#{consultaContasBean.totalContasRecebidasHojeValor}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:link>
							</div>
							<div class="aw-box__title">Contas recebidas Hoje #{consultaContasBean.hoje}</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-thumbs-o-down  fa-3x"></i>
							</div>
							<div class="aw-box__value">
								<p:link href="javascript:void(0);"
										onclick="contasAReceberEmAtraso();">
									<h:outputText value="#{consultaContasBean.totalAReceberEmAtrasoValor}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:link>
							</div>
							<div class="aw-box__title">Contas à receber em atraso</div>
						</div>
					</div>
		
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-barcode  fa-3x"></i>
							</div>
							<div class="aw-box__value">
								<p:link href="javascript:void(0);"
									onclick="contasPagasHoje();">
									<h:outputText value="#{consultaContasBean.totalContasPagasHojeValor}"><f:convertNumber type="currency" />
									</h:outputText>
								</p:link>
							</div>
							<div class="aw-box__title">Contas pagas Hoje #{dashboardBean.hoje}</div>
						</div>					
					</div>
		
					<div class="ui-g-12 ui-lg-3 ui-xl-3">		
						<div class="aw-box">
							<div class="aw-box__icon">
								<i class="fa  fa-exclamation-circle  fa-3x"></i>
							</div>
							<div class="aw-box__value">
								<p:link href="javascript:void(0);"
										onclick="contasAPagarEmAtraso();">
									<h:outputText value="#{consultaContasBean.totalAPagarEmAtrasoValor}">
										<f:convertNumber type="currency" />
									</h:outputText>
								</p:link>
							</div>
							<div class="aw-box__title">Contas à pagar em atraso</div>
						</div>
					</div>
				</div>
		
				
				
				<div class="ui-g dashboard card card_" style="margin-top: -2px;width:100%;">
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-2">
							<div class="overview-box-icon">
								<i class="fa fa-money" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total de receitas <span style="font-size:9px;">Hoje (<h:outputText value="#{dashboardBean.hoje}" />)</span></div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalReceitasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalLancamentosReceitasHojeValor}"><f:convertNumber type="currency" /></h:outputText> em lançamentos</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-3">
							<div class="overview-box-icon">
								<i class="fa fa-diamond" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total contas à receber</div>
								<p:link href="javascript:void(0);" style="color:#ffffff;"
									onclick="contasAReceber();">
									<div class="overview-box-stats"><h:outputText value="#{consultaContasBean.totalAReceberValor}"><f:convertNumber type="currency" /></h:outputText></div>
								</p:link>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalAReceberHojeValor}"><f:convertNumber type="currency" /></h:outputText> à receber em #{dashboardBean.hoje}</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-4">
							<div class="overview-box-icon">
								<i class="fa fa-coffee" />
							</div>
							<div class="overview-box-content">
								<div class="overview-box-title">Total de despesas <span style="font-size:9px;">Hoje (<h:outputText value="#{dashboardBean.hoje}" />)</span></div>
								<div class="overview-box-stats"><h:outputText value="#{dashboardBean.totalDespesasHojeValor}"><f:convertNumber type="currency" /></h:outputText></div>
								<div class="overview-box-details"><h:outputText value="#{dashboardBean.totalLancamentosDespesasHojeValor}"><f:convertNumber type="currency" /></h:outputText> em lançamentos</div>
							</div>
						</div>
					</div>
					
					<div class="ui-g-12 ui-lg-3 ui-xl-3">
						<div class="ui-g overview-box overview-box-1">
							<div class="overview-box-icon">
								<i class="fa fa-eur" /> 
							</div>  
							<div class="overview-box-content">
								<div class="overview-box-title">Total contas à pagar</div>
								<p:link href="javascript:void(0);" style="color:#ffffff;"
									onclick="contasAPagar();">
									<div class="overview-box-stats"><h:outputText value="#{consultaContasBean.totalAPagarValor}"><f:convertNumber type="currency" /></h:outputText></div>						
								</p:link>
								<div class="overview-box-details" style="color: #ececec;"><h:outputText value="#{dashboardBean.totalAPagarHojeValor}"><f:convertNumber type="currency" /></h:outputText> à pagar em #{dashboardBean.hoje}</div>
							</div>
						</div>
					</div>
					
				</div>
				
				
				
				
				<div class="ui-g-12 dashboard-bottom card" style="margin-top: -2px;margin-bottom:30px;">
					<div class="ui-g-12 ui-lg-8 ui-xl-8 despesas-receitas">
						
						<label style="font-weight: bold; font-size: 14px">Despesas x Receitas</label>
							
						<p:barChart id="barChart-despesasPorDia" 
							model="#{dashboardBean.mixedModelPorDia}"
							styleClass="barChart-01" style="height:300px;width: 100%;margin-top: 5px;" />
					</div>
					
					<div class="ui-g-12 ui-lg-4 ui-xl-4 pizza">
						
						<div style="text-align:center;">
							<label style="font-weight: bold; font-size: 14px;color:#585757;">Rank de Despesas - Mês atual</label>
						</div>
						
						<p:pieChart model="#{dashboardBean.pieModel}"
							style="width: 100%; height: 200px;margin-top: 8px;" />
							
						<p:dataTable scrollable="true" id="tb-top5"
							value="#{dashboardBean.top5Despesas}" var="top5Despesa"
							styleClass="vendas-top5">

							<p:column headerText="Categoria" width="70%"
								style="text-align:left;">
								<h:outputText value="#{top5Despesa.item}" />
							</p:column>

							<p:column headerText="Valor" width="30%" style="text-align:right">
								<h:outputText value="#{top5Despesa.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:columnGroup type="footer">
								<p:row>
									<p:column style="text-align:right" footerText="Total:" />
									<p:column style="text-align:right"
										footerText="R$ #{dashboardBean.totalDespesasTop5}" />
								</p:row>
							</p:columnGroup>

						</p:dataTable>
					</div>
				</div>	

		</h:form>

		<p:dialog header="Informações detalhadas" widgetVar="info-detalhes"
			id="info-detalhes" resizable="false" modal="true" position="top"
			style="margin-top: 100px" closeOnEscape="true" responsive="true"
			width="350px">

			<h:form id="form-dialog" style="margin-top: 10px;">

				<div class="ui-fluid">

					<div class="card card-w-title ui-fluid"
						style="padding: 0px 5px 0px 5px; padding-bottom: 0px !important; margin-bottom: 10px;">

						<p:panelGrid columns="2" layout="grid"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-3, ui-grid-col-5">

							<p:outputLabel style="font-weight: bold" value="Categoria: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.item}">
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold"
								value="Valor total de vendas: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.value}"
								style="color: #0db130;font-weight: bold;font-size: 14px;">
								<f:convertNumber type="currency" />
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold" value="Total de itens: " />
							<p:outputLabel
								value="#{dashboardBean.vendaPorCategoriaSelecionada.quantidade}"
								style="font-weight: bold;font-size: 14px;">
							</p:outputLabel>
						</p:panelGrid>

						<p:panelGrid columns="1" layout="grid"
							style="text-align:center;background: #f9f9f9;"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-12">

							<p:outputLabel style="font-weight: bold" value="Produtos " />
						</p:panelGrid>

						<p:dataTable id="fluxoTable5"
							value="#{dashboardBean.detalhesVendasPorProduto}" var="produto"
							scrollable="true" scrollHeight="337" styleClass="vendas-top5">

							<p:column headerText="Produto" style="text-align:left;width:65%">
								<p:commandLink value="#{produto.item}" process="@this"
									update="produto-dialog" style="color: #023961;"
									actionListener="#{dashboardBean.carregarProduto(produto.codigo)}"
									onstart="start();"
									oncomplete="PF('produto-dialog').show();stop();" />
							</p:column>

							<p:column headerText="Valor" style="text-align:right;width:30%">
								<h:outputText value="#{produto.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Quantidade"
								style="text-align:right;width:20%">
								<h:outputText value="#{produto.quantidade}">
								</h:outputText>
							</p:column>

						</p:dataTable>

						<p:commandButton process="@this" ajax="false"
							icon="fa fa-fw fa-file-pdf-o" rendered="false"
							style="width: 120px;background: #f9f9f9;border-radius: 2px;color: #0e71dc;float: left;margin-top: 15px;border: 1px solid #dcdcdc;"
							value="Baixar lista">
							<p:dataExporter type="pdf" target="fluxoTable5"
								fileName="#{dashboardBean.vendaPorCategoriaSelecionada.item}" />
						</p:commandButton>

						<p:commandButton icon="fa fa-fw fa-close"
							style="margin-top: 15px; margin-bottom: 2px;float:right;font-weight: bold;width: 120px;background: #fd6161;color: #ffffff;"
							value="Fechar" onstart="start();"
							oncomplete="stop();PF('info-detalhes').hide();">
						</p:commandButton>

					</div>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="Informações detalhadas"
			widgetVar="info-detalhes-estoque" id="info-detalhes-estoque"
			resizable="false" modal="true" position="top"
			style="margin-top: 100px" closeOnEscape="true" responsive="true"
			width="350px">

			<h:form id="form-dialog-estoque" style="margin-top: 10px;">

				<div class="ui-fluid">

					<div class="card card-w-title ui-fluid"
						style="padding: 0px 5px 0px 5px; padding-bottom: 0px !important; margin-bottom: 10px;">

						<p:panelGrid columns="2" layout="grid"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-3, ui-grid-col-5">

							<p:outputLabel style="font-weight: bold" value="Categoria: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.item}">
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold"
								value="Valor em estoque: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.value}"
								style="color: #0db130;font-weight: bold;font-size: 14px;">
								<f:convertNumber type="currency" />
							</p:outputLabel>

							<p:outputLabel style="font-weight: bold" value="Total de itens: " />
							<p:outputLabel
								value="#{dashboardBean.estoquePorCategoriaSelecionada.quantidade}"
								style="font-weight: bold;font-size: 14px;">
							</p:outputLabel>
						</p:panelGrid>

						<p:panelGrid columns="1" layout="grid"
							style="text-align:center;background: #f9f9f9;"
							styleClass="panelgrid-noborder disabled disabled"
							columnClasses="ui-grid-col-12">

							<p:outputLabel style="font-weight: bold" value="Produtos " />
						</p:panelGrid>

						<p:dataTable id="fluxoTable6"
							value="#{dashboardBean.detalhesEstoquePorProduto}" var="produto"
							scrollable="true" scrollHeight="337" styleClass="vendas-top5">

							<p:column headerText="Produto" style="text-align:left;width:65%">
								<p:commandLink value="#{produto.item}" process="@this"
									update="produto-dialog" style="color: #023961;"
									actionListener="#{dashboardBean.carregarProduto(produto.codigo)}"
									onstart="start();"
									oncomplete="PF('produto-dialog').show();stop();" />
							</p:column>

							<p:column headerText="Valor" style="text-align:right;width:30%">
								<h:outputText value="#{produto.value}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Quantidade"
								style="text-align:right;width:20%">
								<h:outputText value="#{produto.quantidade}">
								</h:outputText>
							</p:column>

						</p:dataTable>

						<p:commandButton process="@this" ajax="false"
							icon="fa fa-fw fa-file-pdf-o" action="#{dashboardBean.baixarLista}" 
							style="width: 120px;background: #f9f9f9;border-radius: 2px;color: #0e71dc;float: left;margin-top: 15px;border: 1px solid #dcdcdc;"
							value="Baixar lista">
						</p:commandButton>

						<p:commandButton icon="fa fa-fw fa-close"
							style="margin-top: 15px; margin-bottom: 2px;float:right;font-weight: bold;width: 120px;background: #fd6161;color: #ffffff;"
							value="Fechar" onstart="start();"
							oncomplete="stop();PF('info-detalhes-estoque').hide();">
						</p:commandButton>

					</div>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog header="Produto selecionado" widgetVar="produto-dialog"
			position="top" style="margin-top: 100px" id="produto-dialog"
			resizable="false" modal="true" closeOnEscape="true" responsive="true"
			styleClass="fotoDialog">

			<h:form id="form-dialogProduto">

				<div class="ui-fluid" style="margin-top: 10px; text-align: center">
					<ui:fragment id="photo"
						rendered="#{dashboardBean.produto.urlImagem != null}">
						<img src="#{dashboardBean.produto.urlImagem}"
							style="width: 200px; height: 250px;" />
					</ui:fragment>

					<div
						style="width: 80%; margin: auto; border-top: 1px solid #ccc; margin-top: 10px; margin-bottom: 10px"></div>

					<p:button icon="fa fa-fw fa-list" disabled="#{seguranca.usuarioLogado.usuario.empresa eq 'Havaianas'}"
						style="margin-bottom: 5px;font-weight: bold;float: right;width: 100px;margin-right: 5px;background:#147df0"
						value="Detalhes" id="foto-button"
						outcome="/cadastros/CadastroProdutos.xhtml" onclick="start();">

						<f:param name="id" value="#{dashboardBean.produtoId}" />
					</p:button>

					<p:commandButton icon="fa fa-fw fa-close"
						style="margin-bottom: 5px;font-weight: bold;width: 100px;background:#e15e5ef0;"
						value="Fechar" onstart="start();"
						oncomplete="stop();PF('produto-dialog').hide();">
					</p:commandButton>
				</div>
			</h:form>
		</p:dialog>
		
		
		<p:dialog header="#{consultaContasBean.tipoContas}" widgetVar="contas-dialog" 
			position="center" id="contas-dialog" width="850"
			resizable="false" modal="true" closeOnEscape="true" responsive="true">

			<h:form id="form-contas">				
				
				<p:panel class="card card-w-title itens-add"
					id="panel-table">
					
					<p:selectOneMenu id="vendedor" rendered="false"
						value="#{consultaContasBean.usuarioSelecionado}">

						<f:selectItem itemLabel="Selecione vendedor" />
						
						<p:ajax event="itemSelect" update="form-contas" process="@this" listener="#{consultaContasBean.filtrarContasPorUsuario}" />

						<f:selectItems value="#{consultaContasBean.todosUsuarios}"
							var="vendedor" itemLabel="#{vendedor.nome}"
							itemValue="#{vendedor}" />
					</p:selectOneMenu>
					
					<p:commandButton id="btn-filtro" styleClass="btn-filtro" value="Filtrar contas"
						onstart="start();" update="form-filtros" process="@this"
						actionListener="#{consultaContasBean.mostrarFiltroCliente}"
						oncomplete="PF('filtros-dialog').show();stop();"
						icon="fa fa-fw fa-sliders">
                	</p:commandButton>			
						
					<p:menuButton id="menu-btn" value="Opções" 
						style="width: 80px;float: right;margin-right: 10px;margin-top:10px;margin-bottom:5px;"
						disabled="#{(consultaContasBean.contasFiltradasSize eq 0) or consultaContasBean.contaSelecionada.id == null or (not seguranca.acessoAdministrador() and not seguranca.acessoUsuarioAvancado())}">

						<p:menuitem icon="fa fa-fw fa-list-ol" 
							value="#{'Pagamentos '.concat(consultaContasBean.hoje)}"
							process="@this" onstart="start();" update="form-pagamentos-hoje"
							action="#{consultaContasBean.prepararPagamentosAdicionadosHoje}"
							rendered="#{consultaContasBean.tipoContas eq ('Contas pagas Hoje '.concat(consultaContasBean.hoje)) or consultaContasBean.tipoContas eq ('Contas recebidas Hoje '.concat(consultaContasBean.hoje)) or consultaContasBean.tipoContas eq ('Total contas à receber') or consultaContasBean.tipoContas eq 'Total contas à pagar'}"
							oncomplete="PF('pagamentos-hoje-dialog').show();stop();" />
						
						<p:menuitem icon="fa fa-fw fa-undo" 
							value="#{consultaContasBean.contaSelecionada.tipo == 'DEBITO' ? 'Desfazer pagamento' : 'Desfazer recebimento'}"
							process="@this" onstart="start();" update="form-pagamentos"
							action="#{consultaContasBean.prepararPagamentosAdicionados}"
							rendered="#{consultaContasBean.contaSelecionada.status}"
							oncomplete="PF('pagamentos-dialog').show();stop();" />
							
						<p:menuitem icon="fa fa-fw fa-undo" 
							value="#{consultaContasBean.contaSelecionada.tipo == 'DEBITO' ? 'Desfazer pagamento' : 'Desfazer recebimento'}"
							process="@this" onstart="start();" update="form-pagamentos"
							action="#{consultaContasBean.prepararPagamentosAdicionados}"
							rendered="#{(not consultaContasBean.contaSelecionada.status) and (consultaContasBean.tipoContas eq ('Contas pagas Hoje '.concat(consultaContasBean.hoje)) or consultaContasBean.tipoContas eq ('Contas recebidas Hoje '.concat(consultaContasBean.hoje))) or consultaContasBean.tipoContas eq ('Total contas à receber') or consultaContasBean.tipoContas eq 'Total contas à pagar'}"
							oncomplete="PF('pagamentos-dialog').show();stop();" />
							
						<p:menuitem value="#{consultaContasBean.contaSelecionada.tipo == 'DEBITO' ? 'Pagar' : 'Receber'}" icon="fa fa-fw fa-money"
							onstart="start();" actionListener="#{consultaContasBean.preparaPagamentoConta}"
							oncomplete="PF('pagamento-dialog').show();stop();"
							update="pagamento-dialog form-pagamento" 
							process="@this form-pagamento"
							rendered="#{not consultaContasBean.contaSelecionada.status}">
						</p:menuitem>
						<p:separator />
							
						<p:menuitem value="Visualizar #{consultaContasBean.contaSelecionada.tipoDeOperacao()}" icon="fa fa-fw fa-eye" process="@this form-contas"
							id="btn-view" actionListener="#{consultaContasBean.visualizar}"
							onclick="PF('downloadLoading').show();">
						</p:menuitem>
						
						<p:menuitem value="Baixar Pedido" icon="fa fa-fw fa-cloud-download"
							action="#{consultaContasBean.emitirPedido}"
							ajax="false" target="_blank"
							rendered="#{consultaContasBean.contaSelecionada.operacao == 'VENDA'}">
						</p:menuitem>
                	
                		<p:menuitem value="Exportar" icon="fa fa-fw fa-file-excel-o" ajax="false">
							<p:dataExporter type="xls" target="contasTable" selectionOnly="true" fileName="#{consultaContasBean.tipoContas}" />
						</p:menuitem>
                	
					</p:menuButton>
					
					<p:tooltip id="toolTipGrow" for="btn-export" rendered="false"
               								showEffect="clip" position="top">             								
               			<h:outputText value="Exportar tudo" />
					</p:tooltip>
					
					<p:commandButton id="btn-export" value="Exportar tudo" ajax="false" 
						disabled="#{(consultaContasBean.contasFiltradasSize eq 0) or (not seguranca.acessoAdministrador() and not seguranca.acessoUsuarioAvancado())}"					
						icon="fa fa-fw fa-file-excel-o" style="float: right;margin-top: 10px;margin-right: 5px;">
						<p:dataExporter type="xls" target="contasTable" fileName="#{consultaContasBean.tipoContas}" />
                	</p:commandButton>
                	
                	
					<p:panelGrid columns="1" layout="grid"
						styleClass="panelgrid-noborder disabled disabled"
						columnClasses="ui-grid-col-12">

						<p:dataTable id="contasTable" paginatorAlwaysVisible="false"
							scrollable="true" scrollHeight="460" style="margin-top: 6px;"
							value="#{consultaContasBean.contasFiltradas}" var="conta"
							emptyMessage="Nenhum resultado encontrado." reflow="true"
							paginator="false" rowKey="#{conta.id}"
							selection="#{consultaContasBean.contaSelecionada}"
							selectionMode="single">

							<p:ajax process="@this" event="rowSelect"
								onstart="PF('downloadLoading').show();"
								oncomplete="PF('downloadLoading').hide();" update="form-contas:menu-btn" />
							<p:ajax process="@this" event="rowUnselect"
								onstart="PF('downloadLoading').show();"
								oncomplete="PF('downloadLoading').hide();" update="form-contas:menu-btn" />

							<p:column headerText="Código" width="20%">
								<h:outputText value="#{conta.codigoOperacao}" />
							</p:column>
							
							<p:column headerText="Descrição" width="35%">
								<h:outputText value="#{conta.descricao != null ? conta.descricao : '-'}" />
							</p:column>
							
							<p:column headerText="Vendedor" width="35%" visible="false">
								<h:outputText value="#{conta.vendedor}" />
							</p:column>

							<p:column headerText="Operação" width="20%">
								<h:outputText
									value="#{conta.operacao == 'LANCAMENTO' ? 'Lançamento' : (conta.operacao == 'COMPRA' ? 'Compra' : (conta.operacao == 'VENDA' ? 'Venda' : conta.operacao))}">
								</h:outputText>
							</p:column>

							<p:column headerText="Tipo" width="20%" visible="false">
								<h:outputText
									value="#{conta.tipo == 'CREDITO' ? 'Receita' : (conta.tipo == 'DEBITO' ? 'Despesa' : '-')}" />
							</p:column>

							<p:column headerText="Parcela" width="20%">
								<h:outputText
									value="#{conta.parcela == 'AVISTA' ? 'À vista' : conta.parcela}" />
							</p:column>

							<p:column headerText="Valor" width="20%">
								<h:outputText value="#{conta.valor}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>
							
							<p:column headerText="Total Pago" width="20%">
								<h:outputText value="#{conta.valor - conta.saldo}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>
							
							<p:column headerText="Saldo" width="20%">
								<h:outputText value="#{conta.saldo}">
									<f:convertNumber type="currency" />
								</h:outputText>
							</p:column>

							<p:column headerText="Vencimento" width="20%">
								<h:outputText value="#{conta.vencimento}">
									<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" dateStyle="short" />
								</h:outputText>
							</p:column>

							<p:column headerText="Pagamento" width="20%">
								<h:outputText
									value="#{conta.pagamento == null ? '-' : conta.pagamento}">
									<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" dateStyle="short" />
								</h:outputText>
							</p:column>

							<p:column headerText="PAGO" width="20%" exportable="false">
								<p:inputSwitch offLabel="Não" onLabel="Sim" styleClass="pagar"
									value="#{conta.status}" disabled="true">
								</p:inputSwitch>
							</p:column>
							
							<p:column headerText="PAGO" width="20%" visible="false">
								<h:outputText
									value="#{conta.status ? 'Sim' : 'Não'}" />
							</p:column>

						</p:dataTable>

						<p:panel style="margin-top: 6px;"
							styleClass="panelgrid-noborder disabled disabled panel-total">

							<p:outputLabel
								value="Total em atraso: R$ #{consultaContasBean.totalContas}"
								style="float:left;margin-top:10px;margin-bottom:5px;font-size: 13px;font-family: inherit;"
								rendered="#{(consultaContasBean.tipoContas eq 'Contas à pagar em atraso') or (consultaContasBean.tipoContas eq 'Contas à receber em atraso')}" />
								
							<p:outputLabel
								value="Total pago hoje: R$ #{consultaContasBean.totalContas}"
								style="float:left;margin-top:10px;margin-bottom:5px;font-size: 13px;font-family: inherit;"
								rendered="#{consultaContasBean.tipoContas eq ('Contas pagas Hoje '.concat(consultaContasBean.hoje)) or consultaContasBean.tipoContas eq ('Contas recebidas Hoje '.concat(consultaContasBean.hoje))}" />
							
							<p:outputLabel
								value="Total à receber: R$ #{consultaContasBean.totalContas}"
								style="float:left;margin-top:10px;margin-bottom:5px;font-size: 13px;font-family: inherit;"
								rendered="#{consultaContasBean.tipoContas eq 'Total contas à receber'}" />
								
							<p:outputLabel
								value="Total à pagar: R$ #{consultaContasBean.totalContas}"
								style="float:left;margin-top:10px;margin-bottom:5px;font-size: 13px;font-family: inherit;"
								rendered="#{consultaContasBean.tipoContas eq 'Total contas à pagar'}" />
							
							<p:commandButton id="btn-close" icon="fa fa-fw fa-close"
								style="float:right;font-weight: bold;width: 100px;background:#e15e5ef0;margin-right: -1px;"
								value="Fechar" onstart="start();"
								oncomplete="stop();PF('contas-dialog').hide();">
							</p:commandButton>
						</p:panel>
					</p:panelGrid>
					
				</p:panel>
			</h:form>
		</p:dialog>
		
		
		<p:dialog id="pagamento-dialog_" showHeader="false" modal="true"
			widgetVar="pagamento-dialog_" draggable="false" width="300"
			closable="false" resizable="false" position="top"
			style="margin-top: 100px">

			<h:form id="form-pagamento_">
				<p:calendar id="inline" mode="inline"
					value="#{consultaContasBean.contaSelecionada.vencimento}"
					locale="pt" pattern="dd/MM/yyyy" />

				<p:panel styleClass="panelgrid-noborder disabled disabled">
					<p:commandButton icon="fa fa-fw fa-check"
						style="float: right;font-weight: bold;font-size: 13px;background-color: #089a29c7;position: relative;margin-top: 8px;margin-right: 0px;"
						value="Confirmar"
						process="@this pagamento-dialog inline form-pagamento"
						action="#{consultaContasBean.pagarTelaResumoFinanceiro}" onstart="start();"
						update="form form-contas" oncomplete="stop();PF('pagamento-dialog').hide();">
					</p:commandButton>

					<p:commandButton icon="fa fa-fw fa-close"
						style="float: right;font-weight: bold;margin-top: 8px;font-size: 13px;background-color: #ab3705b5;position: relative;margin-right: 3px;"
						value="Cancelar" onstart="start();"
						oncomplete="PF('pagamento-dialog').hide();stop();">
					</p:commandButton>
				</p:panel>
			</h:form>
		</p:dialog>
		
		
		<p:dialog header="Pagamento conta"
			widgetVar="pagamento-dialog" id="pagamento-dialog" resizable="false"
			modal="true" closeOnEscape="true" responsive="true" width="250px" position="center">

			<h:form id="form-pagamento">

				<div class="ui-fluid">
					<p:defaultCommand target="btn-salvar_pagamento" />
					
					<p:focus context="campos-pagamento" for="valor_pagamento" />

					<div class="card card-w-title ui-fluid"
						style="padding: 0px 5px 0px 5px; padding-bottom: 0px !important">
						
						<p:panel styleClass="panelgrid-noborder disabled disabled" style="padding: 0px 10px;margin-top: 10px;margin-bottom: 10px;">
							
							<p:outputLabel style="font-weight: bold;font-size: 16px;margin-top: 0px;" value="Saldo " />
							<p:outputLabel value="#{consultaContasBean.contaSelecionada.saldo}"
								style="font-weight: bold;font-size: 22px;margin-top: -4px;float: right;right: 0;position: relative;">
								<f:convertNumber type="currency" />
							</p:outputLabel>
						</p:panel>

						<p:panelGrid columns="1" layout="grid" id="campos-pagamento"
							style="margin-top: 5px; margin-bottom: 5px"
							styleClass="panelgrid-noborder disabled disabled">

							<p:outputLabel value="Data de Pagamento" for="data-venda" />
							<p:datePicker value="#{consultaContasBean.pagamentoConta.dataPagamento}" touchUI="true"
								readonlyInput="true" id="data-venda" pattern="dd/MM/yyyy" showOnFocus="false"
								locale="pt" showIcon="true" />
										
							<p:outputLabel value="Valor Pago" for="valor_pagamento" />
							<p:inputNumber id="valor_pagamento" decimalPlaces="2" minValue="0"
								placeholder="R$ 0,00" autocomplete="off" symbol="R$ "
								value="#{consultaContasBean.pagamentoConta.valorPago}">

							</p:inputNumber>

							<p:outputLabel value="Forma de Pagamento" style="margin-top:5px;float:left;" for="pagamento" rendered="false" />
							<p:selectOneMenu id="pagamento" rendered="false"
								value="#{consultaContasBean.pagamentoConta.formaPagamento}" 
								placeholder="selecione">
								
								<f:selectItem itemLabel="Selecione" />
						            

								<f:selectItems value="#{consultaContasBean.todasFormasPagamentos}"
										var="formaPagamento" itemLabel="#{formaPagamento.nome}"
										itemValue="#{formaPagamento}" />
							</p:selectOneMenu>

						</p:panelGrid>
						
						
						<div
							style="width: 100%; margin-left: -15px;
    						padding-left: 32px;margin-top: 25px;margin-bottom: 5px; 
    						border-top: 1px solid #ccc"></div>


						<p:panel class="card card-w-title ui-fluid"
							style="padding-bottom: 10px;margin-bottom: 0px;">
							
							<p:commandButton id="btn-salvar_pagamento" value="Confirmar"
								widgetVar="btn-salvar_pagamento" icon="fa fa-fw fa-check"
								onstart="PF('downloadLoading').show(); PF('btn-salvar_pagamento').disable();"
								oncomplete="PF('downloadLoading').hide(); PF('btn-salvar_pagamento').enable();"
								update="form form-contas"
								process="@this form-pagamento"
								action="#{consultaContasBean.pagarTelaResumoFinanceiro}"
								style="background-color: #0d8819b5; font-weight: bold; float: right; width: 98px;margin-bottom: 4px;margin-top: 6px;" />

							<p:commandButton icon="fa fa-fw fa-close" value="Cancelar"
								oncomplete="PF('pagamento-dialog').hide();" 
								style="margin-right:2px;background-color: #e15e5ef0;float: right; width: 98px;margin-bottom: 4px;margin-top: 6px">

							</p:commandButton>
						</p:panel>

					</div>
				</div>
			</h:form>
		</p:dialog>


		<p:dialog id="pagamentos-dialog" header="Selecione pagamento" modal="true"
			widgetVar="pagamentos-dialog" draggable="true" width="326"
			closable="true" resizable="false" position="center" responsive="true">

			<h:form id="form-pagamentos">
				
				<p:panel styleClass="panelgrid-noborder disabled disabled" style="padding: 0px 10px;margin-top: 10px;margin-bottom: 10px;">
					
					<p:outputLabel style="font-weight: bold;font-size: 16px;margin-top: 0px;" value="Saldo " />
					<p:outputLabel value="#{consultaContasBean.contaSelecionada.saldo}"
						style="font-weight: bold;font-size: 22px;margin-top: -4px;float: right;right: 0;position: relative;">
						<f:convertNumber type="currency" />
					</p:outputLabel>
				</p:panel>
				
				<p:panelGrid columns="1" layout="grid" style="margin-bottom:2px;"
					styleClass="panelgrid-noborder disabled disabled">
							
					<p:dataTable id="pagamentosTable" paginatorAlwaysVisible="false"
						scrollable="true" scrollHeight="275" reflow="true"
						value="#{consultaContasBean.pagamentosAdicionados}" var="pagamento"
						emptyMessage="Nenhum pagamento encontrado." 
						paginator="false" rowKey="#{pagamento.id}"
						selection="#{consultaContasBean.pagamentoSelecionado}"
						selectionMode="single">
						
						<p:ajax process="@this" event="rowSelect"
							onstart="PF('downloadLoading').show();"
							oncomplete="PF('downloadLoading').hide();" update="form-pagamentos:btn-confirmar-estorno" />
						<p:ajax process="@this" event="rowUnselect"
							onstart="PF('downloadLoading').show();"
							oncomplete="PF('downloadLoading').hide();" update="form-pagamentos:btn-confirmar-estorno" />
	
						<p:column headerText="Data de Pagamento">
							<h:outputText value="#{pagamento.dataPagamento}">
								<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" dateStyle="short" />
							</h:outputText>
						</p:column>
	
						<p:column headerText="Valor Pago">
							<h:outputText value="#{pagamento.valorPago}">
								<f:convertNumber type="currency" />
							</h:outputText>
						</p:column>
						
						<p:column headerText="Forma de Pagamento" visible="false">
							<h:outputText value="#{pagamento.formaPagamento.nome}" />
						</p:column>
	
					</p:dataTable>
					
					<div style="width: 100%;margin-left: -22px;
								    padding-left: 44px;
								    margin-top: 25px;
								    margin-bottom: 0px;
								    border-top: 1px solid #ccc;"></div>
	
					<p:panel styleClass="panelgrid-noborder disabled disabled">
										
						<p:commandButton id="btn-confirmar-estorno" value="Confirmar"
							widgetVar="btn-confirmar-estorno" icon="fa fa-fw fa-check"
							onstart="PF('downloadLoading').show(); PF('btn-confirmar-estorno').disable();"
							oncomplete="PF('downloadLoading').hide(); PF('btn-confirmar-estorno').enable();"
							disabled="#{consultaContasBean.pagamentoSelecionado.id == null}"
							update="form form-contas form-pagamento"
							process="@this form-pagamento"
							onclick="estornarConta(#{consultaContasBean.contaSelecionada.id});"
							style="background-color: #0d8819b5; font-weight: bold; float: right;margin-left: 3px;font-size: 13px; width: 100px;margin-bottom: 0px;margin-top: 8px;margin-right: 0px;" />
						
						<p:commandButton icon="fa fa-fw fa-close"
							style="float: right;font-weight: bold;margin-top: 8px;font-size: 13px;width: 100px;background-color: #ab3705b5;position: relative;margin-right: 0px;margin-bottom: 2px;"
							value="Fechar" onstart="start();"
							oncomplete="PF('pagamentos-dialog').hide();stop();">
						</p:commandButton>
					</p:panel>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		
		
		<p:dialog id="pagamentos-hoje-dialog" header="Pagamentos #{consultaContasBean.hoje}" modal="true"
			widgetVar="pagamentos-hoje-dialog" draggable="true" width="326"
			closable="true" resizable="false" position="center" responsive="true">

			<h:form id="form-pagamentos-hoje">
				
				<p:panel styleClass="panelgrid-noborder disabled disabled" style="padding: 0px 10px;margin-top: 10px;margin-bottom: 10px;">
					
					<p:outputLabel style="font-weight: bold;font-size: 16px;margin-top: 0px;" value="Saldo " />
					<p:outputLabel value="#{consultaContasBean.contaSelecionada.saldo}"
						style="font-weight: bold;font-size: 22px;margin-top: -4px;float: right;right: 0;position: relative;">
						<f:convertNumber type="currency" />
					</p:outputLabel>
				</p:panel>
				
				<p:panelGrid columns="1" layout="grid" style="margin-bottom:2px;"
					styleClass="panelgrid-noborder disabled disabled">
							
					<p:dataTable id="pagamentosHojeTable" paginatorAlwaysVisible="false"
						scrollable="true" scrollHeight="275" reflow="true"
						value="#{consultaContasBean.pagamentosAdicionados}" var="pagamento"
						emptyMessage="Nenhum pagamento encontrado." 
						paginator="false">
	
						<p:column headerText="Data de Pagamento">
							<h:outputText value="#{pagamento.dataPagamento}">
								<f:convertDateTime locale="pt_BR" pattern="dd/MM/yyyy" dateStyle="short" />
							</h:outputText>
						</p:column>
	
						<p:column headerText="Valor Pago">
							<h:outputText value="#{pagamento.valorPago}">
								<f:convertNumber type="currency" />
							</h:outputText>
						</p:column>
						
						<p:column headerText="Forma de Pagamento" visible="false">
							<h:outputText value="#{pagamento.formaPagamento.nome}" />
						</p:column>
	
					</p:dataTable>
					
					<div style="width: 100%;margin-left: -22px;
								    padding-left: 44px;
								    margin-top: 25px;
								    margin-bottom: 0px;
								    border-top: 1px solid #ccc;"></div>
	
					<p:panel styleClass="panelgrid-noborder disabled disabled">
										
						<p:commandButton icon="fa fa-fw fa-close"
							style="float: right;font-weight: bold;margin-top: 8px;font-size: 13px;width: 100px;background-color: #ab3705b5;position: relative;margin-right: 0px;margin-bottom: 2px;"
							value="Fechar" onstart="start();"
							oncomplete="PF('pagamentos-hoje-dialog').hide();stop();">
						</p:commandButton>
					</p:panel>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		
		
		<p:dialog id="filtros-dialog" header="Filtrar contas" modal="true"
			widgetVar="filtros-dialog" draggable="true" width="326"
			closable="true" resizable="false" position="center" responsive="true">

			<h:form id="form-filtros" style="margin-top: 10px;">
				
				<p:panelGrid columns="1" layout="grid" style="margin-bottom:2px;" id="grid-filtros"
					styleClass="panelgrid-noborder disabled disabled">
	
					<p:outputLabel value="Vendedor" for="vendedor" />
					<p:selectOneMenu id="vendedor"
						value="#{consultaContasBean.usuarioSelecionado}">

						<f:selectItem itemLabel="Selecione vendedor" />
						
						<f:selectItems value="#{consultaContasBean.todosUsuarios}"
							var="vendedor" itemLabel="#{vendedor.nome}"
							itemValue="#{vendedor}" />
					</p:selectOneMenu>
					
					<p:panel styleClass="panelgrid-noborder disabled disabled filtro-vendas" 
						style="margin-top:10px;margin-bottom:42px;"
						rendered="#{consultaContasBean.labelFiltroContas != null}">
					
						<p:outputLabel value="#{consultaContasBean.labelFiltroContas}" style="font-weight: bolder;margin-top: 4px;float: left;" />
						<p:selectBooleanButton value="#{consultaContasBean.filtroTodasContas}" onLabel="#{consultaContasBean.hoje}" offLabel="Todas" style="width:6rem;float:right;width: 62px !important;"/>
					</p:panel>		
					
					<p:panel styleClass="panelgrid-noborder disabled disabled filtro-vendas" 
						style="margin-bottom:42px;#{consultaContasBean.labelFiltroContas != null ? 'margin-top:5px;' : 'margin-top:10px;'}"
						rendered="#{consultaContasBean.receitas}">
					
						<p:outputLabel value="Somente Vendas" for="contas-periodo" style="font-weight: bolder;margin-top: 2px;float: left;" />
						<p:inputSwitch id="contas-periodo" offLabel="Não" onLabel="Sim" styleClass="vendas-filtro" style="float:right;width: 60px !important;"
							value="#{consultaContasBean.somenteVendas}">
							<p:ajax process="@this" update="@this" onstart="start();" onsuccess="stop();" listener="#{consultaContasBean.mostrarFiltroCliente}" />
						</p:inputSwitch>
					</p:panel>			
					
					<p:panel id="panel-filtros" styleClass="panelgrid-noborder disabled disabled filtro-vendas-clientes hide"
						rendered="#{consultaContasBean.receitas}">
						<p:outputLabel value="Cliente" for="cliente" />
						<p:selectOneMenu id="cliente" style="margin-top:8px;margin-bottom:15px;"
							value="#{consultaContasBean.clienteSelecionado}">
	
							<f:selectItem itemLabel="Selecione cliente" />
							
							<f:selectItems value="#{consultaContasBean.todosClientes}"
								var="cliente" itemLabel="#{cliente.nome}"
								itemValue="#{cliente}" />
						</p:selectOneMenu>
					</p:panel>	
					
					<div style="width: 100%;margin-left: -22px;
								    padding-left: 44px;
								    margin-top: #{consultaContasBean.receitas ? '5px' : '20px'};
								    margin-bottom: 0px;
								    border-top: 1px solid #ccc;"></div>
	
					<p:panel styleClass="panelgrid-noborder disabled disabled">
										
						<p:commandButton icon="fa fa-fw fa-filter"
							style="float: right;font-weight: bold;margin-top: 8px;font-size: 13px;width: 100px;background-color: #136A8A;position: relative;margin-right: 0px;margin-bottom: 2px;"
							value="Confirmar" onstart="start();" update="form-contas" process="@this form-filtros"
							action="#{consultaContasBean.filtrarContasPorUsuario}"
							oncomplete="PF('filtros-dialog').hide();stop();">
						</p:commandButton>
					</p:panel>
				</p:panelGrid>
			</h:form>
		</p:dialog>
		

		<p:dialog id="downloadLoading" showHeader="false" modal="true"
			widgetVar="downloadLoading" header="Status" draggable="false"
			closable="false" resizable="false">
			<p:graphicImage name="images/loadingbar.gif"
				library="manhattan-layout" width="50" />
		</p:dialog>

		<script type="text/javascript">
			function start() {
				PF('downloadLoading').show();
			}

			function stop() {
				PF('downloadLoading').hide();
			}
			function contasAPagarEmAtraso() {
				buscarContasAPagarEmAtraso();
			}
			function contasAReceberEmAtraso() {
				buscarContasAReceberEmAtraso();
			}		
			function contasRecebidasHoje() {
				buscarContasRecebidasHoje();
			}		
			function contasPagasHoje() {
				buscarContasPagasHoje();
			}
			function contasAReceber() {
				buscarContasAReceber();
			}
			function contasAPagar() {
				buscarContasAPagar();
			}
			
			function ocultarFiltroCliente() {
				$(".filtro-vendas-clientes").addClass("hide");
				
			}

			function mostrarFiltroCliente() {
				$(".filtro-vendas-clientes").removeClass("hide");
			}
		</script>

	</ui:define>

</ui:composition>
